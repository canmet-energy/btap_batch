title: BTAP Analysis Run Options
type: object
properties:
  :analysis_name:
    description: "Used to identify the analysis and name the parent folder. Must be less than 64 charecters and only 
    letters numbers and underscores."
    type: string
    pattern: ^[a-zA-Z0-9_\\s]*$
    minLength: 1
    maxLength: 64

  :reference_run:
    type: boolean
    description: "Optionally run the baseline/reference building. This will also provide comparison information from 
    the baseline. If omitted it will assume to be true and run the reference simulations."

  :algorithm_type:
    description: "
    This will select the algorithm to use in the analysis. For information on the
 * [Optimization](optimization.md): Run a genetic optimization for a fixed number of runs and generations based. \n\n
 * [Parametric](parametric.md): Run all possible combinations in input file.\n\n
 * [Elimination](elimination.md): Examine theoretical maximum energy savings from each domain for a given model. \n\n
 * [Sensitivity](sensitivity.md): Examine the energy and cost effect from each measure selected. (~100 measures) \n\n
 * [Latin-Hypercube-Sampling](latin_hypercube_sampling.md): Sample the solution space with a given number of simulations\n\n
 * [Batch](packages.md): When you wish to simply run a few specific building scenarios for comparison.\n\n
    "
    type: string
    enum:
      - elimination
      - batch
      - nsga2
      - parametric
      - reference
      - sampling-lhs
      - sensitivity

  :algorithm_lhs_n_samples:
    description: "This is the number of simulations that will be preformed in the analysis. See
    [Scipy implementation](https://scikit-optimize.github.io/stable/auto_examples/sampler/initial-sampling-method.html)"
    type: integer
    minimum: 1
    maximum: 5000


  :algorithm_lhs_type:
    description: "This should be set to classic.. However other options are available in the scikit documentation listed
    above. See [Scipy implementation](https://scikit-optimize.github.io/stable/auto_examples/sampler/initial-sampling-method.html)"
    type: string
    enum:
      - classic

  :algorithm_lhs_random_seed:
    description: "algorithm_lhs_random_seed This is the random seed that will be used to drive the LHS random function.
    Change this to another number to alter the output from the same run. See
    [Scipy implementation](https://scikit-optimize.github.io/stable/auto_examples/sampler/initial-sampling-method.html)"
    type: number
    minimum: 1
    maximum: 100


  :algorithm_nsga_population:
    description: "This is population size that is used in the NSGAII. Should be set to multiples
    than the number of threads/cores that you have available on your system to get best performance. Described in the
    [pymoo](https://pymoo.org/algorithms/moo/nsga2.html)"
    type: integer
    minimum: 1
    maximum: 100

  :algorithm_nsga_n_generations:
    description: "This is the number of generations that are used in the NSGAII. Described in the
    [pymoo](https://pymoo.org/algorithms/moo/nsga2.html)"
    type: integer
    minimum: 1
    maximum: 100

  :algorithm_nsga_prob:
    description: "Used to configure crossover. See documentation
    [pymoo](https://pymoo.org/operators/crossover.html)"
    type: number
    minimum: 0.0
    maximum: 100.0

  :algorithm_nsga_eta:
    description: "Used to configure crossover. See documentation
    [pymoo](https://pymoo.org/operators/crossover.html)"
    type: number
    minimum: 0.0
    maximum: 100.0

  :algorithm_nsga_minimize_objectives:
    description: "Contains a list of the outputs from btap that you would like to optimize to. Pro tip. Run a
    senstivity analysis and examine the output.xlsx in the results folder to find a outpum column you wish to minimize."
    items:
      type: string
#    examples: [
#      :algorithm_nsga_minimize_objectives: [
#        "energy_eui_total_gj_per_m_sq",
#        "cost_equipment_total_cost_per_m_sq"
#      ]
#    ]


  :output_variables:
    description: "This enables EnergyPlus optional outputs. Details are contained in the (documentation)[docs/output.md]"
    items:
      type: object
      properties:
        key:
          type: string
        variable:
          type: string
        frequency:
          type: string
        operation:
          type: string
        unit:
          type: string

  :output_meters:
    description: "This enables EnergyPlus optional outputs. Details are contained in the (documentation)[docs/output.md]"
    items:
      type: object
      properties:
        key:
          type: string
        variable:
          type: string
        frequency:
          type: string
        operation:
          type: string
        unit:
          type: string

  :options:
    type: object
    properties:
      :building_type:

        description: "This allows you to select either a pre-configured geometry in our library, or a custom geometry developed by a user.\n\n
         The Geometry files are OpenStudio OSM files that have geometry and spacetypes defined as per NECB2011, but nothing else as BTAP will poplate the rest based
          on the template and options selected. A full list of built-in models are available. They are listed
          (here)[https://github.com/NREL/openstudio-standards/tree/nrcan/lib/openstudio-standards/standards/necb/NECB2011/data/geometry]
          You would add the geometry name without the '.osm' extension. \n\n
          Please note that the context is important.  Having two or more building types makes perfect sense for a parametric or sample_lhs analysis.
          But for for sensitvity and nsga2, it will not work as expected. If you minimize cost and energy. The optimizer will look
          for solutions for the FullSerivice restaurant and ignore the HighriseApartment as a solution since the restaurant will
          always be cheaper.
          "
#        examples: [
#            :building_type:
#              [
#                  "FullServiceRestaurant",
#                  "HighriseApartment"
#              ]
#        ]

        items:
          type: string
          minLength: 1
          maxLength: 24

      :template:
        description: "
        This field will designate which baseline building templates to use. Currently BTAP supports the **National Energy
        Building Code**
        (NECB)[https://nrc.canada.ca/en/certifications-evaluations-standards/codes-canada/codes-canada-publications/national-energy-code-canada-buildings-2020]
        The vintages that are availble are the NECB2011 to 2020. BTAP will use all the performance requirements of the
        selected codes in the analysis. It will determine what the `NECB_Default` will be used in other options as
        selected. While you could use this field with many templates to optimize. It is not recommended as it will probably
        optimize to the lastest code.
        "
        items:
          type: string
          enum:
            - BTAPPRE1980
            - BTAP1980TO2010
            - NECB2011
            - NECB2015
            - NECB2017
            - NECB2020

      :epw_file:
        description: "#List of Weather files to use in the analysis.  These weather files should be a subset of the
        weather files defined in your build_config.yml file.   The other locations that you can use can be found in this repository"
        items:
          type: string
          pattern: ^.*\.epw$

      :primary_heating_fuel:
        description: ""
        items:
          type: string
          enum:
            - Electricity
            - NaturalGas
            - ElectricityHPElecBackup
            - NaturalGasHPGasBackup
            - ElectricityHPGasBackupMixed
            - NaturalGasHPElecBackupMixed

      :dcv_type:
        description: ""
        items:
          type: string
          enum:
            - NECB_Default
            - No_DCV
            - Occupancy_based_DCV
            - CO2_based_DCV


      :lights_type:
        description: ""
        items:
          type: string
          enum:
            - NECB_Default
            - LED

      :lights_scale:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100

      :occupancy_loads_scale:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100

      :electrical_loads_scale:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100
      :oa_scale:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100
      :infiltration_scale:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100

      :daylighting_type:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - add_daylighting_controls
                - none

      :ecm_system_name:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - HS09_CCASHP_Baseboard
                - HS08_CCASHP_VRF
                - HS11_ASHP_PTHP
                #                - HS12_ASHP_Baseboard Not supported in 3.6.1
                - HS13_ASHP_VRF
                - HS14_CGSHP_FanCoils

      :chiller_type:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - VSD

      :airloop_economizer_type:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - DifferentialEnthalpy
                - DifferentialDryBulb

      :shw_scale:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100

      :baseline_system_zones_map_option:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - one_sys_per_bldg # Note: this option is the default  (i.e. 'NECB_Default')
                - one_sys_per_dwelling_unit


      :erv_package:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - NECB_Default_All
                - Plate-All
                - Plate-Existing
                - Rotary-All
                - Rotary-Existing

      :boiler_eff:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - NECB 88% Efficient Condensing Boiler
                - Viessmann Vitocrossal 300 CT3-17 96.2% Efficient Condensing Gas Boiler

      :furnace_eff:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - NECB 85% Efficient Condensing Gas Furnace

      :shw_eff:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - Natural Gas Power Vent with Electric Ignition
                - Natural Gas Direct Vent with Electric Ignition

      :ext_wall_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 0.314 # R18
                - 0.278 # R20
                - 0.247 # R22
                - 0.210 # R27
                - 0.183  #R31

      :ext_roof_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 0.227
                - 0.193
                - 0.183
                - 0.162
                - 0.142
                - 0.138
                - 0.121

      :ext_floor_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 0.227
                - 0.183
                - 0.162
                - 0.142

      :ground_wall_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 0.568
                - 0.379
                - 0.284
                - 0.210

      :ground_wall_roof:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 0.568
                - 0.379
                - 0.284
                - 0.210

      :ground_floor_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 0.758
                - 0.379


      :door_construction_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 2.4
                - 2.2
                - 1.6


      :fixed_window_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 2.4
                - 2.2
                - 1.6
      :glass_door_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 2.4
                - 2.2
                - 1.6
      :overhead_door_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 2.4
                - 2.2
                - 1.6
      :skylight_cond:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              enum:
                - 2.4
                - 2.2
                - 1.6

      :glass_door_solar_trans:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.05
              maximum: 0.95
      :fixed_wind_solar_trans:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.05
              maximum: 0.95
      :skylight_solar_trans:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.05
              maximum: 0.95



      :fdwr_set:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.001
              maximum: 0.950
      :srr_set:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.001
              maximum: 0.950

      :rotation_degrees:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.0
              maximum: 359.0

      :scale_x:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100.0
      :scale_y:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100.0
      :scale_z:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 100.0

      :pv_ground_type:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - add_pv_ground

      :pv_ground_total_area_pv_panels_m2:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default # No PV
            - type: boolean
              enum:
                - false
            - type: number
              minimum: 1
              maximum: 100000

      :pv_ground_azimuth_angle:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default # South
            - type: number
              minimum: 0.0
              maximum: 359.0

      :pv_ground_module_description:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - Standard
                - Premium
                - ThinFilm
      # Advances DX units type.
      :adv_dx_units:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - Carrier WeatherExpert
                - Lennox Model L Ultra High Efficiency

      :nv_type:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
                - add_nv
      :nv_opening_fraction:
        description: ""
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 0.01
              maximum: 1.00

      :nv_temp_out_min:
        description: "Minimum outdoor air temperature (in Celsius) below which natural ventilation is shut down. Default
         will be 13C from M.Tardif experience with QC schools.
         NECB_Default: Will set this to 13.
        "
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default # Will set to 13
            - type: number
              minimum: 0.00
              maximum: 100.00

      :nv_delta_temp_in_out:
        description: "Temperature difference (in Celsius) between the indoor and outdoor air temperatures below which 
        ventilation is shut down Default is 1.0 from M.Tardif experience in QC.
        Units: C
        NECB_Default: Will set this to 1.0
        "
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default # Will set to 1.0
            - type: number
              minimum: 0.00
              maximum: 100.00

      :npv_start_year:
        description: " 
        An integer (year) larger than 2005 (first year of neb_end_use_prices.csv).
        NECB_Default: Will set this to 2022
        "
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default
            - type: number
              minimum: 2005
              maximum: 2049

      :npv_end_year:
        description: " 
        An integer (year) less than 2051 (last year of neb_end_use_prices.csv).
        NECB Default:  Will set this to 2041.
        "
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default # Will set to 2022
            - type: number
              minimum: 2005
              maximum: 2050
      :npv_discount_rate:
        description: " 
        An integer (year) less than 2051 (last year of neb_end_use_prices.csv).
        NECB_Default: Will set it to 0.03.
        "
        items:
          anyOf:
            - type: string
              enum:
                - NECB_Default # default will set to 0.03
            - type: number
              minimum: 0.0
              maximum: 1.0
